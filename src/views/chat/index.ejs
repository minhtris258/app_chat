<%
// Trang chat khÃ´ng cáº§n navbar -> cÃ³ thá»ƒ táº¯t náº¿u muá»‘n
// locals.showNavbar = false;
%>

<!-- ==== PHáº¦N CHAT â€“ chá»‰ markup ná»™i dung, dá»… style ==== -->
<div class="shell">
  <aside class="sidebar">
    <div class="sidebar-top">
      <div class="brand">Talky</div>
      <div class="search"><input id="searchInput" placeholder="TÃ¬m kiáº¿m" /></div>
    </div>

    <div class="me-card" id="meCard">
      <div class="avatar" id="meAvatar">ğŸ˜Š</div>
      <div class="me-info">
        <div class="me-name" id="meName">Báº¡n</div>
        <div class="me-status online">Online</div>
      </div>
    </div>

    <div class="tabs">
      <button class="tab active" data-tab="all">Táº¥t cáº£</button>
      <button class="tab" data-tab="groups">NhÃ³m</button>
      <button class="tab" data-tab="pinned">Ghim</button>
      <button class="tab" data-tab="archived">LÆ°u trá»¯</button>
    </div>

    <ul class="conv-list" id="convList"></ul>

    <div class="sidebar-footer">
      <button id="newGroupBtn" class="btn outline small">+ Táº¡o nhÃ³m</button>
      <button id="logoutBtn" class="btn danger small">ÄÄƒng xuáº¥t</button>
    </div>
  </aside>

  <main class="chat">
    <header class="chat-header">
      <div class="contact">
        <div class="avatar" id="peerAvatar">ğŸ™‚</div>
        <div class="meta">
          <div id="peerName" class="name">Chá»n má»™t cuá»™c trÃ² chuyá»‡n</div>
          <div id="peerStatus" class="status">â€”</div>
        </div>
      </div>
      <div class="actions">
        <button class="icon-btn" id="callBtn">ğŸ“</button>
        <button class="icon-btn" id="videoBtn">ğŸ¥</button>
        <button class="icon-btn" id="searchBtn">ğŸ”</button>
      </div>
    </header>

<section class="messages" id="messages" aria-live="polite"></section>
<div id="typingIndicator" class="typing-indicator hidden">Äang nháº­p...</div>

<!-- Thanh preview áº£nh -->
<div id="previewBar" class="preview-bar hidden" aria-live="polite"></div>

<!-- âœ… Emoji picker: web component tá»« npm -->
<emoji-picker id="emojiPicker" class="emoji-panel hidden"></emoji-picker>

<footer class="composer">
  <button class="icon-btn" id="emojiBtn" aria-label="Emoji">ğŸ˜Š</button>
  <input id="messageInput" placeholder="Nháº­p tin nháº¯n..." autocomplete="off" />
  <input id="imageInput" type="file" accept="image/*" hidden />
  <button class="icon-btn" id="attachBtn" aria-label="ÄÃ­nh kÃ¨m">ğŸ“</button>
  <button class="btn primary" id="sendBtn">Gá»­i</button>
</footer>

  </main>
  <!-- ==== Modal Táº¡o NhÃ³m ==== -->
<div id="groupModal" class="modal hidden">
  <div class="modal-content">
    <h3>Táº¡o nhÃ³m má»›i</h3>
    <label>TÃªn nhÃ³m:</label>
    <input type="text" id="groupNameInput" placeholder="Nháº­p tÃªn nhÃ³m...">

    <div class="user-list" id="userList"></div>

    <div class="actions">
      <button class="btn outline" id="cancelGroupBtn">Há»§y</button>
      <button class="btn primary" id="confirmGroupBtn">Táº¡o nhÃ³m</button>
    </div>
  </div>
</div>

</div>

<%
// yield thÃªm scripts riÃªng cá»§a trang chat
scripts = `
  <script src="/js/chat.js"></script>
`;
%>
